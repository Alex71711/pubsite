<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}{{ site.name or '–ü–ê–ë' }} ‚Äî –ì–ª–∞–≤–Ω–∞—è{% endblock %}</title>
  <meta name="description" content="{{ site.tagline or '–ü–ê–ë ‚Äî –∫—Ä–∞—Ñ—Ç–æ–≤–æ–µ –ø–∏–≤–æ, –∫—É—Ö–Ω—è, –∞–∫—Ü–∏–∏, —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –∏ –∂–∏–≤–∞—è –º—É–∑—ã–∫–∞.' }}">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
  {% set ym_id = (site.notifications.yandex_metrika.id if site.notifications and site.notifications.yandex_metrika else '') %}
  {% if ym_id %}
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    ym({{ ym_id|int }}, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
    });
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/{{ ym_id|int }}" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  {% endif %}
  <style>
    :root{
      --bg:#0b0b0b;         /* –ø–æ—á—Ç–∏ —á—ë—Ä–Ω—ã–π —Ñ–æ–Ω */
      --fg:#e7e7e7;         /* –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç */
      --muted:#a1a1a1;      /* –≤—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç */
      --line:#2a2a2a;       /* –ª–∏–Ω–∏–∏/–±–æ—Ä–¥–µ—Ä—ã */
      --accent: {{ site.theme.accent or '#caa54b' }};     /* –∑–æ–ª–æ—Ç–æ */
      --header-h:120px;   /* –≤—ã—Å–æ—Ç–∞ —Ö–µ–¥–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    }
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--fg);padding-top:var(--header-h);transition:padding-top .25s ease}
    .brand{font-family:'Playfair Display',serif;letter-spacing:.2em}
    .brand-logo{height:64px;width:auto;display:block;margin:0}
    @media (min-width:768px){.brand-logo{height:88px}}
    .main-nav a{position:relative;padding:8px 0;letter-spacing:.05em}
    .main-nav a::after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:left;transition:transform .25s}
    .main-nav a[data-active="1"]::after{transform:scaleX(1)}
    .main-nav a:hover{color:#fff}
    .gold-btn{background:var(--accent);color:#111}
    .section-title{display:flex;align-items:center;gap:16px;color:var(--accent)}
    .section-title::before,.section-title::after{content:"";flex:1;height:1px;background:var(--accent)}
    .muted{color:var(--muted)}
    /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —É—Å–∏–ª–µ–Ω–∏—è –¥–ª—è —à–∞–ø–∫–∏ */
    header.site-header{box-shadow:0 8px 24px rgba(0,0,0,.35)}
    .gold-divider{height:1px;background:linear-gradient(90deg,transparent,var(--accent),transparent)}
    .logo-glow::before{content:"";position:absolute;inset:-8px;border-radius:9999px;z-index:-1;background:radial-gradient(closest-side,rgba(202,165,75,.18),transparent 70%)}
    /* –ü–ª–∞–≤–Ω–æ–µ —Å–∂–∞—Ç–∏–µ —à–∞–ø–∫–∏ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö */
  header.site-header{
    transition: padding .25s ease, background-color .25s ease, box-shadow .25s ease, backdrop-filter .25s ease;
  }
  .site-header .brand-logo{
    transition: height .25s ease, transform .25s ease, opacity .25s ease;
  }
  .site-header.shrink .brand-logo{ height:44px !important; }
  .site-header.shrink .py-4{ padding-top:.5rem !important; padding-bottom:.5rem !important; }
  .site-header.shrink nav.main-nav{ padding-bottom:.25rem !important; }
/* === Mobile-friendly MAIN NAV (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ –∫—Ä–∞—è–º–∏) === */
  .nav-wrap{ position:relative; }
  .nav-wrap::before,.nav-wrap::after{ content:""; position:absolute; top:0; bottom:0; width:24px; pointer-events:none; opacity:0; transition:opacity .2s; }
  .nav-wrap::before{ left:0; background:linear-gradient(to right, rgba(11,11,11,1), rgba(11,11,11,0)); }
  .nav-wrap::after{ right:0; background:linear-gradient(to left, rgba(11,11,11,1), rgba(11,11,11,0)); }
  .nav-wrap[data-left="1"]::before{ opacity:1; }
  .nav-wrap[data-right="1"]::after{ opacity:1; }
  .nav-scroll{ overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:thin; scrollbar-color: var(--accent) transparent; }
  .nav-scroll::-webkit-scrollbar{ height:8px; }
  .nav-scroll::-webkit-scrollbar-thumb{ background:var(--accent); border-radius:9999px; }
  /* –ß—É—Ç—å –∫—Ä—É–ø–Ω–µ–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è –∑–æ–Ω–∞ –Ω–∞ –º–æ–±–∏–ª–∫–µ */
  .main-nav a{ padding:10px 6px; }
  @media (min-width:768px){ .main-nav a{ padding:8px 0; } }
  /* –ì–ª–æ–±–∞–ª—å–Ω–æ: –ø—É–Ω–∫—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –•–ï–î–ï–†–ï –∏ –≤ –º–µ–Ω—é –≤—Å–µ–≥–¥–∞ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É */
  #mainNav, #catNav{ display:flex; flex-wrap:nowrap; white-space:nowrap; }
  #mainNav a, #catNav a{ flex:0 0 auto; white-space:nowrap; }
/* Shrinkable header info text sizes */
  .site-header .hdr-info,
  .site-header .hdr-info .addr,
  .site-header .hdr-info .hours,
  .site-header .hdr-info .phone{
    transition: font-size .25s ease, line-height .25s ease;
  }
  /* Mobile ‚â§ md */
  @media (max-width: 767px){
    .site-header .hdr-info--m .addr{ font-size: 1.125rem; } /* ~text-lg */
    .site-header.shrink .hdr-info--m .addr{ font-size: .95rem; }
    .site-header .hdr-info--m .hours,
    .site-header .hdr-info--m .phone{ font-size: .8125rem; } /* ~text-sm */
    .site-header.shrink .hdr-info--m .hours,
    .site-header.shrink .hdr-info--m .phone{ font-size: .75rem; }
  }
  /* Desktop ‚â• md */
  @media (min-width: 768px){
    .site-header .hdr-info--d{ font-size: .875rem; } /* base for rows */
    .site-header .hdr-info--d .addr{ font-size: .95rem; }
    .site-header.shrink .hdr-info--d{ font-size: .8125rem; }
    .site-header.shrink .hdr-info--d .addr{ font-size: .875rem; }
  }
/* Force header NAV to show on admin pages too */
  header.site-header .nav-wrap.is-desktop{ display:none; }
  @media (min-width:768px){ header.site-header .nav-wrap.is-desktop{ display:flex !important; } }
  @media (min-width:768px){ header.site-header .nav-wrap.is-mobile{ display:none !important; } }
  @media (max-width:767px){ header.site-header .nav-wrap.is-mobile{ display:flex !important; } }
/* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–µ—Ä—Ü–∞–Ω–∏–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –ø—Ä–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –±–µ–π–¥–∂–∞ –∫–æ—Ä–∑–∏–Ω—ã */
  .cart-badge-wrap{ display:inline-flex; width:1.5rem; height:1.25rem; overflow:hidden; align-items:center; justify-content:center; }
  .cart-count{ transform-origin:center center; }
  .animate-bump{ animation:cartBump .35s ease; }
  @keyframes cartBump{ 0%{transform:scale(1)} 40%{transform:scale(1.08)} 100%{transform:scale(1)} }
  /* –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–æ–ª–æ—Å—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –Ω–∞ —Å–∫—Ä–æ–ª–ª–µ—Ä–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
  .nav-scroll{ scrollbar-gutter: stable both-edges; }
</style>
  <!-- JSON-LD (–±–µ–∑ tojson, —Å —Ä—É—á–Ω—ã–º —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BarOrPub",
    "name": "{{ site.name or '–ü–ê–ë' }}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "{{ site.contacts.address or '–£–ª–∏—Ü–∞, 1' }}",
      "addressLocality": "",
      "postalCode": ""
    },
    "telephone": "{{ site.contacts.phone or '+48 000 000 000' }}",
    "openingHours": ["{{ site.contacts.hours or 'Mo-Su 12:00-24:00' }}"]
  }
  </script>
</head>
<body>{% set maxw = site.theme.max_width or 'max-w-6xl' %}
  <!-- HEADER -->
  <header class="site-header fixed top-0 left-0 right-0 z-50 bg-[color:var(--bg)]/95 backdrop-blur border-b border-[color:var(--line)]">
    <div class="{{ maxw }} mx-auto px-4">
      <!-- –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫: –º–æ–±–∏–ª—å–Ω—ã–π ‚Äî –õ–û–ì–û —Å–ª–µ–≤–∞, –∏–Ω—Ñ–æ —Å–ø—Ä–∞–≤–∞; –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ ‚Äî –ª–æ–≥–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É, –∏–Ω—Ñ–æ —Å–ø—Ä–∞–≤–∞ -->
      <div class="py-4">
        <div class="grid grid-cols-2 md:grid-cols-3 items-center gap-4">

          <!-- –õ–û–ì–û: —Å–ª–µ–≤–∞ –Ω–∞ –º–æ–±–∏–ª–µ, –ø–æ —Ü–µ–Ω—Ç—Ä—É –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ -->
          <div class="justify-self-start md:justify-self-center md:col-start-2 text-left md:text-center">
            <div class="flex items-center justify-start md:justify-center gap-6">
              <span class="hidden md:block h-px w-28 bg-[color:var(--line)]"></span>
              <a href="{{ url_for('index') }}" class="relative inline-flex flex-col items-center">
                <img src="{{ url_for('static', filename='logo.png') }}" alt="{{ site.name or '–ü–ê–ë' }}" class="brand-logo"/>
                <div class="text-[13px] md:text-base text-[color:var(--accent)] mt-1 leading-tight text-center whitespace-nowrap overflow-hidden text-ellipsis max-w-[150px] md:max-w-none">{{ site.tagline or '–ª—É—á—à–∏–π –±–∞—Ä –≥–æ—Ä–æ–¥–∞' }}</div>
              </a>
              <span class="hidden md:block h-px w-28 bg-[color:var(--line)]"></span>
            </div>
          </div>

          <!-- Mobile (‚â§ md): –∞–¥—Ä–µ—Å/—á–∞—Å—ã/—Ç–µ–ª–µ—Ñ–æ–Ω —Å–ø—Ä–∞–≤–∞ -->
          <div class="md:hidden text-right">
            <div class="hdr-info hdr-info--m text-right leading-tight">
              <div class="font-semibold text-white"><a class="hover:text-white addr" href="{{ site.contacts.map_url or 'https://yandex.ru/maps/-/CLGCJK3x' }}" target="_blank" rel="noopener"><span class="mr-1">üìç</span>{{ site.contacts.address or '—É–ª. –ê—Ä–±–∞—Ç, 1–∞' }}</a></div>
              <div class="muted hours whitespace-pre-line"><span class="mr-1">üïí</span>{{ site.contacts.hours or '–ü–Ω‚Äì–í—Å: 12:00‚Äì00:00' }}</div>
              <div class="muted"><a class="hover:text-white phone" href="tel:{{ site.contacts.phone or '+79990000000' }}"><span class="mr-1">‚òé</span>{{ site.contacts.phone or '+7 (999) 000‚Äë00‚Äë00' }}</a></div>
            </div>
          </div>

          <!-- Desktop (‚â• md): –∞–¥—Ä–µ—Å/—á–∞—Å—ã —Å–ø—Ä–∞–≤–∞ -->
          <div class="hidden md:flex justify-end text-right">
            <div class="hdr-info hdr-info--d leading-tight text-right">
              <div class="font-semibold text-white"><a class="hover:text-white addr" href="{{ site.contacts.map_url or 'https://yandex.ru/maps/-/CLGCJK3x' }}" target="_blank" rel="noopener"><span class="mr-1">üìç</span>{{ site.contacts.address or '—É–ª. –ê—Ä–±–∞—Ç, 1–∞' }}</a></div>
              <div class="muted hours whitespace-pre-line"><span class="mr-1">üïí</span>{{ site.contacts.hours or '–ü–Ω‚Äì–í—Å: 12:00‚Äì00:00' }}</div>
              <div class="muted"><a class="hover:text-white phone" href="tel:{{ site.contacts.phone or '+79990000000' }}"><span class="mr-1">‚òé</span>{{ site.contacts.phone or '+7 (999) 000‚Äë00‚Äë00' }}</a></div>
            </div>
          </div>

        </div>
      </div>

      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ–¥ –ª–æ–≥–æ—Ç–∏–ø–æ–º -->
      <div class="gold-divider mb-2"></div>
      {% set p = request.path %}

      <!-- Desktop (‚â• md): -->
      <div class="nav-wrap is-desktop justify-center">
        <nav id="mainNav" class="main-nav nav-scroll flex flex-nowrap whitespace-nowrap items-center md:justify-center justify-start gap-4 md:gap-6 text-[12px] md:text-sm uppercase tracking-wider text-[color:var(--fg)] pb-3">
          <a href="/" data-active="{{ '1' if p=='/' else '0' }}">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="/menu" data-active="{{ '1' if p.startswith('/menu') else '0' }}">–ú–µ–Ω—é</a>
          <!-- <a href="/booking" data-active="{{ '1' if p.startswith('/booking') else '0' }}">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a> -->
          <a href="/contact" data-active="{{ '1' if p.startswith('/contact') else '0' }}">–û –Ω–∞—Å</a>
          <a href="/gallery" data-active="0">–§–æ—Ç–æ–≥–∞–ª–µ—Ä–µ—è</a>
          <a href="/cart" data-active="{{ '1' if p.startswith('/cart') else '0' }}" class="inline-flex items-center gap-1">
            –ö–æ—Ä–∑–∏–Ω–∞
            <span class="cart-badge-wrap inline-flex items-center justify-center w-6 h-5 overflow-hidden rounded">
              <span id="cart-count" data-cart-count="{{ cart_count|default(0) }}" class="cart-count inline-flex items-center justify-center w-6 h-5 rounded bg-[color:var(--accent)] text-black font-semibold">{{ cart_count|default(0) }}</span>
            </span>
          </a>
        </nav>
      </div>

      <!-- Mobile (‚â§ md): -->
      <div class="nav-wrap is-mobile">
        <nav id="mainNav" class="main-nav nav-scroll flex flex-nowrap whitespace-nowrap items-center md:justify-center justify-start gap-4 md:gap-6 text-[12px] md:text-sm uppercase tracking-wider text-[color:var(--fg)] pb-3">
          <a href="/" data-active="{{ '1' if p=='/' else '0' }}">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="/menu" data-active="{{ '1' if p.startswith('/menu') else '0' }}">–ú–µ–Ω—é</a>
          <a href="/cart" data-active="{{ '1' if p.startswith('/cart') else '0' }}" class="inline-flex items-center gap-1">
            –ö–æ—Ä–∑–∏–Ω–∞
            <span class="cart-badge-wrap inline-flex items-center justify-center w-6 h-5 overflow-hidden rounded">
              <span  data-cart-count="{{ cart_count|default(0) }}" class="cart-count inline-flex items-center justify-center w-6 h-5 rounded bg-[color:var(--accent)] text-black font-semibold">{{ cart_count|default(0) }}</span>
            </span>
          </a>
          <!-- <a href="/booking" data-active="{{ '1' if p.startswith('/booking') else '0' }}">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a> -->
          <a href="/contact" data-active="{{ '1' if p.startswith('/contact') else '0' }}">–û –Ω–∞—Å</a>
          <a href="/gallery" data-active="0">–§–æ—Ç–æ–≥–∞–ª–µ—Ä–µ—è</a>
        </nav>
      </div>
      <div class="gold-divider mt-2"></div>
    </div>
  </header>
  <script>
  (function(){
    const header = document.querySelector('header.site-header');
    if(!header) return;
    const skipShrink = {{ 'true' if request.path.startswith('/menu') else 'false' }};
    let isShrink = false;

    function setVars(){
      const h = header.offsetHeight;
      document.documentElement.style.setProperty('--header-h', h + 'px');
      // –°–æ–æ–±—â–∞–µ–º –≤—Å–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º: –≤—ã—Å–æ—Ç–∞ —Ö–µ–¥–µ—Ä–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
      window.dispatchEvent(new CustomEvent('header:resize', { detail: { height: h } }));
    }

    if(skipShrink){
      try{ document.body.style.transition = 'none'; }catch(_){}
      setVars();
      return;
    }

    function onScroll(){
      const s = window.scrollY > 40; // —Å–∂–∏–º–∞–µ–º –ø–æ—Å–ª–µ 40px –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
      if(s !== isShrink){
        isShrink = s;
        header.classList.toggle('shrink', s);
        setVars();
      }
    }

    // –í–æ –≤—Ä–µ–º—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—ã—Å–æ—Ç–∞ —Ö–µ–¥–µ—Ä–∞ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ ‚Äî —Å–ª–µ–¥–∏–º –∑–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –≤—ã—Å–æ—Ç–æ–π
    if('ResizeObserver' in window){
      const ro = new ResizeObserver(()=> setVars());
      ro.observe(header);
    }

    window.addEventListener('scroll', ()=>requestAnimationFrame(onScroll), {passive:true});
    window.addEventListener('load', ()=>{ onScroll(); setVars(); });
    window.addEventListener('resize', setVars);
    setTimeout(()=>{ onScroll(); setVars(); }, 50);
  })();
</script>

  <!-- –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∫—Ä–∞—è —É –≤—Å–µ—Ö –ø–æ–ª–æ—Å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å .nav-wrap -->
  <script>
    (function(){
      function attach(wrap){
        const scroller = wrap.querySelector('.nav-scroll');
        if(!scroller) return;
        function update(){
          const atLeft = scroller.scrollLeft <= 0;
          const atRight = Math.ceil(scroller.scrollLeft + scroller.clientWidth) >= scroller.scrollWidth;
          wrap.dataset.left = atLeft ? '0' : '1';
          wrap.dataset.right = atRight ? '0' : '1';
        }
        scroller.addEventListener('scroll', update, {passive:true});
        window.addEventListener('load', update);
        window.addEventListener('resize', update);
        update();
      }
      document.querySelectorAll('.nav-wrap').forEach(attach);
    })();
  </script>

  <!-- CONTENT WRAPPER -->
  <main class="{{ maxw }} mx-auto px-4 py-8 min-h-[70vh]">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="space-y-2 mb-6">
          {% for category, msg in messages %}
            <div class="p-3 rounded-lg bg-emerald-900/30 text-emerald-200 border border-emerald-700/40">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <!-- FOOTER -->
  <footer class="border-t border-[color:var(--line)]">
    <div class="{{ maxw }} mx-auto px-4 py-10 grid md:grid-cols-3 gap-8 text-sm">
      <div>
        <div class="font-semibold text-white mb-3">–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</div>
        <p class="muted whitespace-pre-line">{{ site.contacts.hours or '–ü–Ω‚Äì–í—Å: 12:00‚Äì00:00' }}</p>
      </div>
      <div>
        <div class="font-semibold text-white mb-3">–ê–¥—Ä–µ—Å</div>
        <p class="muted">{{ site.contacts.address or '—É–ª. –ê—Ä–±–∞—Ç, 1–∞' }}, –§–µ–æ–¥–æ—Å–∏—è</p>
        <p class="muted">T: {{ site.contacts.phone or '+7 (999) 000‚Äë00‚Äë00' }}</p>
      </div>
      <div id="map">
        <div class="font-semibold text-white mb-3">–ú—ã –∑–¥–µ—Å—å</div>
        <iframe class="w-full h-44 rounded-md border border-[color:var(--line)]" src="https://yandex.ru/map-widget/v1/?lang=ru_RU&ll=35.381416%2C45.029153&z=16&pt=35.381416,45.029153,pm2rdl" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
    <div class="border-t border-[color:var(--line)]">
      <div class="{{ maxw }} mx-auto px-4 py-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-xs muted">
        <div>¬© {{ site.name or '–ü–ê–ë' }} ¬∑ –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</div>
        <div class="flex items-center gap-4">
          <a class="hover:text-white" href="{{ url_for('privacy') }}">–ü–æ–ª–∏—Ç–∏–∫–∞ –ü–î–Ω</a>
          <a class="hover:text-white" href="{{ url_for('consent') }}">–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ü–î–Ω</a>
          <a class="hover:text-white" href="{{ url_for('offer') }}">–ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞</a>
          <a class="hover:text-white" href="{{ url_for('terms') }}">–î–æ—Å—Ç–∞–≤–∫–∞/–æ–ø–ª–∞—Ç–∞</a>
        </div>
        <div class="flex items-center gap-4"><a class="hover:text-white" href="{{ site.socials.vk or '#' }}" aria-label="VK">VK</a>
          <a class="hover:text-white" href="#" aria-label="Telegram">TG</a>
        </div>
      </div>
    </div>
  </footer>
  <div id="cookie-banner" class="fixed bottom-4 left-0 right-0 px-4 z-50" style="display:none;">
    <div class="max-w-4xl mx-auto bg-black/80 border border-[color:var(--line)] rounded-xl p-3 flex flex-col sm:flex-row sm:items-center gap-3 text-sm">
      <div class="flex-1 leading-snug">
        {{ site.cookies.text or '–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º cookie –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.' }}
        <a class="underline" href="{{ url_for('privacy') }}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
      </div>
      <button id="cookie-accept" class="px-4 py-2 rounded-lg bg-[color:var(--accent)] text-black text-sm">
        {{ site.cookies.button or '–û–∫' }}
      </button>
    </div>
  </div>
<script>
// –ì–ª–æ–±–∞–ª—å–Ω–æ: –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º ¬´—Ç–∏—Ö—É—é¬ª –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É –¥–∞–∂–µ –Ω–∞ –º–æ–±–∏–ª–∫–µ (Safari)
(function(){
  function ensureSilentTarget(form){
    try{
      if(!form.querySelector('input[name="silent"]')){
        var h = document.createElement('input');
        h.type = 'hidden';
        h.name = 'silent';
        h.value = '1';
        form.appendChild(h);
      }
      form.setAttribute('target','cart_silent');
    }catch(_){ }
  }
  // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º submit –ª—é–±—ã—Ö —Ñ–æ—Ä–º /cart/add –∏–ª–∏ —Å –∫–ª–∞—Å—Å–æ–º .add-cart-form
  document.addEventListener('submit', function(e){
    var f = e.target;
    if(!f || !f.tagName || f.tagName.toLowerCase() !== 'form') return;
    var isAdd = false;
    try{ isAdd = (f.classList && f.classList.contains('add-cart-form')) || (f.action && /\/cart\/add$/.test(f.action)); }catch(_){ }
    if(!isAdd) return;
    ensureSilentTarget(f);
  }, true);
  // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π: –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ—Å—Ç–∞–≤–∏–º —Ü–µ–ª–µ–≤—É—é —Ä–∞–º–∫—É –≤—Å–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–º
  window.addEventListener('load', function(){
    document.querySelectorAll('form.add-cart-form, form[action$="/cart/add"]').forEach(ensureSilentTarget);
  });
})();
</script>
<!-- –ù–µ–≤–∏–¥–∏–º—ã–π iframe –¥–ª—è ¬´—Ç–∏—Ö–æ–π¬ª –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
<iframe name="cart_silent" style="display:none;width:0;height:0;border:0"></iframe>
<script>
(function(){
  var enabled = {{ 'true' if site.cookies.enabled is not false else 'false' }};
  if(!enabled) return;
  var banner = document.getElementById('cookie-banner');
  if(!banner) return;
  var key = 'cookie_ack_v1';
  try{
    if(localStorage.getItem(key) === '1'){ banner.style.display = 'none'; return; }
  }catch(_){}
  banner.style.display = 'block';
  var btn = document.getElementById('cookie-accept');
  if(btn){
    btn.addEventListener('click', function(){
      try{ localStorage.setItem(key, '1'); }catch(_){}
      banner.style.display = 'none';
    });
  }
})();
</script>
<script>
(function(){
  function setCartCount(c){
    try{
      document.querySelectorAll('[data-cart-count], .cart-count, #cart-count').forEach(function(el){
        el.textContent = String(c);
        try{ el.dataset.cartCount = String(c); }catch(_){}
        try{ el.classList.add('animate-bump'); setTimeout(function(){ el.classList.remove('animate-bump'); }, 500); }catch(_){ }
      });
    }catch(_){ }
  }
  // –ù–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç /cart/add –ø—Ä–∏—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ postMessage –∏–∑ –Ω–µ–≤–∏–¥–∏–º–æ–≥–æ iframe
  window.addEventListener('message', function(e){
    try{
      var d = e && e.data ? e.data : {};
      if(d && d.type === 'cart_count' && typeof d.count === 'number'){
        setCartCount(d.count);
      }
    }catch(_){ }
  });
})();
</script>
</body>
</html>
